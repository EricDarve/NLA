{"version":3,"file":"workerpool.min.js","mappings":"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","sources":["webpack://workerpool/webpack/universalModuleDefinition","webpack://workerpool/./src/Pool.js","webpack://workerpool/./src/Promise.js","webpack://workerpool/./src/WorkerHandler.js","webpack://workerpool/./src/debug-port-allocator.js","webpack://workerpool/./src/environment.js","webpack://workerpool/./src/generated/embeddedWorker.js","webpack://workerpool/./src/requireFoolWebpack.js","webpack://workerpool/./src/transfer.js","webpack://workerpool/./src/worker.js","webpack://workerpool/webpack/bootstrap","webpack://workerpool/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"workerpool\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"workerpool\"] = factory();\n\telse\n\t\troot[\"workerpool\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn ","var Promise = require('./Promise');\nvar WorkerHandler = require('./WorkerHandler');\nvar environment = require('./environment');\nvar DebugPortAllocator = require('./debug-port-allocator');\nvar DEBUG_PORT_ALLOCATOR = new DebugPortAllocator();\n/**\n * A pool to manage workers\n * @param {String} [script]   Optional worker script\n * @param {WorkerPoolOptions} [options]  See docs\n * @constructor\n */\nfunction Pool(script, options) {\n  if (typeof script === 'string') {\n    this.script = script || null;\n  }\n  else {\n    this.script = null;\n    options = script;\n  }\n\n  this.workers = [];  // queue with all workers\n  this.tasks = [];    // queue with tasks awaiting execution\n\n  options = options || {};\n\n  this.forkArgs = Object.freeze(options.forkArgs || []);\n  this.forkOpts = Object.freeze(options.forkOpts || {});\n  this.workerThreadOpts = Object.freeze(options.workerThreadOpts || {})\n  this.debugPortStart = (options.debugPortStart || 43210);\n  this.nodeWorker = options.nodeWorker;\n  this.workerType = options.workerType || options.nodeWorker || 'auto'\n  this.maxQueueSize = options.maxQueueSize || Infinity;\n  this.workerTerminateTimeout = options.workerTerminateTimeout || 1000;\n\n  this.onCreateWorker = options.onCreateWorker || (() => null);\n  this.onTerminateWorker = options.onTerminateWorker || (() => null);\n\n  // configuration\n  if (options && 'maxWorkers' in options) {\n    validateMaxWorkers(options.maxWorkers);\n    this.maxWorkers = options.maxWorkers;\n  }\n  else {\n    this.maxWorkers = Math.max((environment.cpus || 4) - 1, 1);\n  }\n\n  if (options && 'minWorkers' in options) {\n    if(options.minWorkers === 'max') {\n      this.minWorkers = this.maxWorkers;\n    } else {\n      validateMinWorkers(options.minWorkers);\n      this.minWorkers = options.minWorkers;\n      this.maxWorkers = Math.max(this.minWorkers, this.maxWorkers);     // in case minWorkers is higher than maxWorkers\n    }\n    this._ensureMinWorkers();\n  }\n\n  this._boundNext = this._next.bind(this);\n\n\n  if (this.workerType === 'thread') {\n    WorkerHandler.ensureWorkerThreads();\n  }\n}\n\n\n/**\n * Execute a function on a worker.\n *\n * Example usage:\n *\n *   var pool = new Pool()\n *\n *   // call a function available on the worker\n *   pool.exec('fibonacci', [6])\n *\n *   // offload a function\n *   function add(a, b) {\n *     return a + b\n *   };\n *   pool.exec(add, [2, 4])\n *       .then(function (result) {\n *         console.log(result); // outputs 6\n *       })\n *       .catch(function(error) {\n *         console.log(error);\n *       });\n *\n * @param {String | Function} method  Function name or function.\n *                                    If `method` is a string, the corresponding\n *                                    method on the worker will be executed\n *                                    If `method` is a Function, the function\n *                                    will be stringified and executed via the\n *                                    workers built-in function `run(fn, args)`.\n * @param {Array} [params]  Function arguments applied when calling the function\n * @param {ExecOptions} [options]  Options object\n * @return {Promise.<*, Error>} result\n */\nPool.prototype.exec = function (method, params, options) {\n  // validate type of arguments\n  if (params && !Array.isArray(params)) {\n    throw new TypeError('Array expected as argument \"params\"');\n  }\n\n  if (typeof method === 'string') {\n    var resolver = Promise.defer();\n\n    if (this.tasks.length >= this.maxQueueSize) {\n      throw new Error('Max queue size of ' + this.maxQueueSize + ' reached');\n    }\n\n    // add a new task to the queue\n    var tasks = this.tasks;\n    var task = {\n      method:  method,\n      params:  params,\n      resolver: resolver,\n      timeout: null,\n      options: options\n    };\n    tasks.push(task);\n\n    // replace the timeout method of the Promise with our own,\n    // which starts the timer as soon as the task is actually started\n    var originalTimeout = resolver.promise.timeout;\n    resolver.promise.timeout = function timeout (delay) {\n      if (tasks.indexOf(task) !== -1) {\n        // task is still queued -> start the timer later on\n        task.timeout = delay;\n        return resolver.promise;\n      }\n      else {\n        // task is already being executed -> start timer immediately\n        return originalTimeout.call(resolver.promise, delay);\n      }\n    };\n\n    // trigger task execution\n    this._next();\n\n    return resolver.promise;\n  }\n  else if (typeof method === 'function') {\n    // send stringified function and function arguments to worker\n    return this.exec('run', [String(method), params]);\n  }\n  else {\n    throw new TypeError('Function or string expected as argument \"method\"');\n  }\n};\n\n/**\n * Create a proxy for current worker. Returns an object containing all\n * methods available on the worker. The methods always return a promise.\n *\n * @return {Promise.<Object, Error>} proxy\n */\nPool.prototype.proxy = function () {\n  if (arguments.length > 0) {\n    throw new Error('No arguments expected');\n  }\n\n  var pool = this;\n  return this.exec('methods')\n      .then(function (methods) {\n        var proxy = {};\n\n        methods.forEach(function (method) {\n          proxy[method] = function () {\n            return pool.exec(method, Array.prototype.slice.call(arguments));\n          }\n        });\n\n        return proxy;\n      });\n};\n\n/**\n * Creates new array with the results of calling a provided callback function\n * on every element in this array.\n * @param {Array} array\n * @param {function} callback  Function taking two arguments:\n *                             `callback(currentValue, index)`\n * @return {Promise.<Array>} Returns a promise which resolves  with an Array\n *                           containing the results of the callback function\n *                           executed for each of the array elements.\n */\n/* TODO: implement map\nPool.prototype.map = function (array, callback) {\n};\n*/\n\n/**\n * Grab the first task from the queue, find a free worker, and assign the\n * worker to the task.\n * @protected\n */\nPool.prototype._next = function () {\n  if (this.tasks.length > 0) {\n    // there are tasks in the queue\n\n    // find an available worker\n    var worker = this._getWorker();\n    if (worker) {\n      // get the first task from the queue\n      var me = this;\n      var task = this.tasks.shift();\n\n      // check if the task is still pending (and not cancelled -> promise rejected)\n      if (task.resolver.promise.pending) {\n        // send the request to the worker\n        var promise = worker.exec(task.method, task.params, task.resolver, task.options)\n          .then(me._boundNext)\n          .catch(function () {\n            // if the worker crashed and terminated, remove it from the pool\n            if (worker.terminated) {\n              return me._removeWorker(worker);\n            }\n          }).then(function() {\n            me._next(); // trigger next task in the queue\n          });\n\n        // start queued timer now\n        if (typeof task.timeout === 'number') {\n          promise.timeout(task.timeout);\n        }\n      } else {\n        // The task taken was already complete (either rejected or resolved), so just trigger next task in the queue\n        me._next();\n      }\n    }\n  }\n};\n\n/**\n * Get an available worker. If no worker is available and the maximum number\n * of workers isn't yet reached, a new worker will be created and returned.\n * If no worker is available and the maximum number of workers is reached,\n * null will be returned.\n *\n * @return {WorkerHandler | null} worker\n * @private\n */\nPool.prototype._getWorker = function() {\n  // find a non-busy worker\n  var workers = this.workers;\n  for (var i = 0; i < workers.length; i++) {\n    var worker = workers[i];\n    if (worker.busy() === false) {\n      return worker;\n    }\n  }\n\n  if (workers.length < this.maxWorkers) {\n    // create a new worker\n    worker = this._createWorkerHandler();\n    workers.push(worker);\n    return worker;\n  }\n\n  return null;\n};\n\n/**\n * Remove a worker from the pool.\n * Attempts to terminate worker if not already terminated, and ensures the minimum\n * pool size is met.\n * @param {WorkerHandler} worker\n * @return {Promise<WorkerHandler>}\n * @protected\n */\nPool.prototype._removeWorker = function(worker) {\n  var me = this;\n\n  DEBUG_PORT_ALLOCATOR.releasePort(worker.debugPort);\n  // _removeWorker will call this, but we need it to be removed synchronously\n  this._removeWorkerFromList(worker);\n  // If minWorkers set, spin up new workers to replace the crashed ones\n  this._ensureMinWorkers();\n  // terminate the worker (if not already terminated)\n  return new Promise(function(resolve, reject) {\n    worker.terminate(false, function(err) {\n      me.onTerminateWorker({\n        forkArgs: worker.forkArgs,\n        forkOpts: worker.forkOpts,\n        workerThreadOpts: worker.workerThreadOpts,\n        script: worker.script\n      });\n      if (err) {\n        reject(err);\n      } else {\n        resolve(worker);\n      }\n    });\n  });\n};\n\n/**\n * Remove a worker from the pool list.\n * @param {WorkerHandler} worker\n * @protected\n */\nPool.prototype._removeWorkerFromList = function(worker) {\n  // remove from the list with workers\n  var index = this.workers.indexOf(worker);\n  if (index !== -1) {\n    this.workers.splice(index, 1);\n  }\n};\n\n/**\n * Close all active workers. Tasks currently being executed will be finished first.\n * @param {boolean} [force=false]   If false (default), the workers are terminated\n *                                  after finishing all tasks currently in\n *                                  progress. If true, the workers will be\n *                                  terminated immediately.\n * @param {number} [timeout]        If provided and non-zero, worker termination promise will be rejected\n *                                  after timeout if worker process has not been terminated.\n * @return {Promise.<void, Error>}\n */\nPool.prototype.terminate = function (force, timeout) {\n  var me = this;\n\n  // cancel any pending tasks\n  this.tasks.forEach(function (task) {\n    task.resolver.reject(new Error('Pool terminated'));\n  });\n  this.tasks.length = 0;\n\n  var f = function (worker) {\n    DEBUG_PORT_ALLOCATOR.releasePort(worker.debugPort);\n    this._removeWorkerFromList(worker);\n  };\n  var removeWorker = f.bind(this);\n\n  var promises = [];\n  var workers = this.workers.slice();\n  workers.forEach(function (worker) {\n    var termPromise = worker.terminateAndNotify(force, timeout)\n      .then(removeWorker)\n      .always(function() {\n        me.onTerminateWorker({\n          forkArgs: worker.forkArgs,\n          forkOpts: worker.forkOpts,\n          workerThreadOpts: worker.workerThreadOpts,\n          script: worker.script\n        });\n      });\n    promises.push(termPromise);\n  });\n  return Promise.all(promises);\n};\n\n/**\n * Retrieve statistics on tasks and workers.\n * @return {{totalWorkers: number, busyWorkers: number, idleWorkers: number, pendingTasks: number, activeTasks: number}} Returns an object with statistics\n */\nPool.prototype.stats = function () {\n  var totalWorkers = this.workers.length;\n  var busyWorkers = this.workers.filter(function (worker) {\n    return worker.busy();\n  }).length;\n\n  return {\n    totalWorkers:  totalWorkers,\n    busyWorkers:   busyWorkers,\n    idleWorkers:   totalWorkers - busyWorkers,\n\n    pendingTasks:  this.tasks.length,\n    activeTasks:   busyWorkers\n  };\n};\n\n/**\n * Ensures that a minimum of minWorkers is up and running\n * @protected\n */\nPool.prototype._ensureMinWorkers = function() {\n  if (this.minWorkers) {\n    for(var i = this.workers.length; i < this.minWorkers; i++) {\n      this.workers.push(this._createWorkerHandler());\n    }\n  }\n};\n\n/**\n * Helper function to create a new WorkerHandler and pass all options.\n * @return {WorkerHandler}\n * @private\n */\nPool.prototype._createWorkerHandler = function () {\n  const overridenParams = this.onCreateWorker({\n    forkArgs: this.forkArgs,\n    forkOpts: this.forkOpts,\n    workerThreadOpts: this.workerThreadOpts,\n    script: this.script\n  }) || {};\n\n  return new WorkerHandler(overridenParams.script || this.script, {\n    forkArgs: overridenParams.forkArgs || this.forkArgs,\n    forkOpts: overridenParams.forkOpts || this.forkOpts,\n    workerThreadOpts: overridenParams.workerThreadOpts || this.workerThreadOpts,\n    debugPort: DEBUG_PORT_ALLOCATOR.nextAvailableStartingAt(this.debugPortStart),\n    workerType: this.workerType,\n    workerTerminateTimeout: this.workerTerminateTimeout,\n  });\n}\n\n/**\n * Ensure that the maxWorkers option is an integer >= 1\n * @param {*} maxWorkers\n * @returns {boolean} returns true maxWorkers has a valid value\n */\nfunction validateMaxWorkers(maxWorkers) {\n  if (!isNumber(maxWorkers) || !isInteger(maxWorkers) || maxWorkers < 1) {\n    throw new TypeError('Option maxWorkers must be an integer number >= 1');\n  }\n}\n\n/**\n * Ensure that the minWorkers option is an integer >= 0\n * @param {*} minWorkers\n * @returns {boolean} returns true when minWorkers has a valid value\n */\nfunction validateMinWorkers(minWorkers) {\n  if (!isNumber(minWorkers) || !isInteger(minWorkers) || minWorkers < 0) {\n    throw new TypeError('Option minWorkers must be an integer number >= 0');\n  }\n}\n\n/**\n * Test whether a variable is a number\n * @param {*} value\n * @returns {boolean} returns true when value is a number\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\n\n/**\n * Test whether a number is an integer\n * @param {number} value\n * @returns {boolean} Returns true if value is an integer\n */\nfunction isInteger(value) {\n  return Math.round(value) == value;\n}\n\nmodule.exports = Pool;\n","'use strict';\n\n/**\n * Promise\n *\n * Inspired by https://gist.github.com/RubaXa/8501359 from RubaXa <trash@rubaxa.org>\n *\n * @param {Function} handler   Called as handler(resolve: Function, reject: Function)\n * @param {Promise} [parent]   Parent promise for propagation of cancel and timeout\n */\nfunction Promise(handler, parent) {\n  var me = this;\n\n  if (!(this instanceof Promise)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  if (typeof handler !== 'function') {\n    throw new SyntaxError('Function parameter handler(resolve, reject) missing');\n  }\n\n  var _onSuccess = [];\n  var _onFail = [];\n\n  // status\n  this.resolved = false;\n  this.rejected = false;\n  this.pending = true;\n\n  /**\n   * Process onSuccess and onFail callbacks: add them to the queue.\n   * Once the promise is resolve, the function _promise is replace.\n   * @param {Function} onSuccess\n   * @param {Function} onFail\n   * @private\n   */\n  var _process = function (onSuccess, onFail) {\n    _onSuccess.push(onSuccess);\n    _onFail.push(onFail);\n  };\n\n  /**\n   * Add an onSuccess callback and optionally an onFail callback to the Promise\n   * @param {Function} onSuccess\n   * @param {Function} [onFail]\n   * @returns {Promise} promise\n   */\n  this.then = function (onSuccess, onFail) {\n    return new Promise(function (resolve, reject) {\n      var s = onSuccess ? _then(onSuccess, resolve, reject) : resolve;\n      var f = onFail    ? _then(onFail,    resolve, reject) : reject;\n\n      _process(s, f);\n    }, me);\n  };\n\n  /**\n   * Resolve the promise\n   * @param {*} result\n   * @type {Function}\n   */\n  var _resolve = function (result) {\n    // update status\n    me.resolved = true;\n    me.rejected = false;\n    me.pending = false;\n\n    _onSuccess.forEach(function (fn) {\n      fn(result);\n    });\n\n    _process = function (onSuccess, onFail) {\n      onSuccess(result);\n    };\n\n    _resolve = _reject = function () { };\n\n    return me;\n  };\n\n  /**\n   * Reject the promise\n   * @param {Error} error\n   * @type {Function}\n   */\n  var _reject = function (error) {\n    // update status\n    me.resolved = false;\n    me.rejected = true;\n    me.pending = false;\n\n    _onFail.forEach(function (fn) {\n      fn(error);\n    });\n\n    _process = function (onSuccess, onFail) {\n      onFail(error);\n    };\n\n    _resolve = _reject = function () { }\n\n    return me;\n  };\n\n  /**\n   * Cancel te promise. This will reject the promise with a CancellationError\n   * @returns {Promise} self\n   */\n  this.cancel = function () {\n    if (parent) {\n      parent.cancel();\n    }\n    else {\n      _reject(new CancellationError());\n    }\n\n    return me;\n  };\n\n  /**\n   * Set a timeout for the promise. If the promise is not resolved within\n   * the time, the promise will be cancelled and a TimeoutError is thrown.\n   * If the promise is resolved in time, the timeout is removed.\n   * @param {number} delay     Delay in milliseconds\n   * @returns {Promise} self\n   */\n  this.timeout = function (delay) {\n    if (parent) {\n      parent.timeout(delay);\n    }\n    else {\n      var timer = setTimeout(function () {\n        _reject(new TimeoutError('Promise timed out after ' + delay + ' ms'));\n      }, delay);\n\n      me.always(function () {\n        clearTimeout(timer);\n      });\n    }\n\n    return me;\n  };\n\n  // attach handler passing the resolve and reject functions\n  handler(function (result) {\n    _resolve(result);\n  }, function (error) {\n    _reject(error);\n  });\n}\n\n/**\n * Execute given callback, then call resolve/reject based on the returned result\n * @param {Function} callback\n * @param {Function} resolve\n * @param {Function} reject\n * @returns {Function}\n * @private\n */\nfunction _then(callback, resolve, reject) {\n  return function (result) {\n    try {\n      var res = callback(result);\n      if (res && typeof res.then === 'function' && typeof res['catch'] === 'function') {\n        // method returned a promise\n        res.then(resolve, reject);\n      }\n      else {\n        resolve(res);\n      }\n    }\n    catch (error) {\n      reject(error);\n    }\n  }\n}\n\n/**\n * Add an onFail callback to the Promise\n * @param {Function} onFail\n * @returns {Promise} promise\n */\nPromise.prototype['catch'] = function (onFail) {\n  return this.then(null, onFail);\n};\n\n// TODO: add support for Promise.catch(Error, callback)\n// TODO: add support for Promise.catch(Error, Error, callback)\n\n/**\n * Execute given callback when the promise either resolves or rejects.\n * @param {Function} fn\n * @returns {Promise} promise\n */\nPromise.prototype.always = function (fn) {\n  return this.then(fn, fn);\n};\n\n/**\n * Create a promise which resolves when all provided promises are resolved,\n * and fails when any of the promises resolves.\n * @param {Promise[]} promises\n * @returns {Promise} promise\n */\nPromise.all = function (promises){\n  return new Promise(function (resolve, reject) {\n    var remaining = promises.length,\n        results = [];\n\n    if (remaining) {\n      promises.forEach(function (p, i) {\n        p.then(function (result) {\n          results[i] = result;\n          remaining--;\n          if (remaining == 0) {\n            resolve(results);\n          }\n        }, function (error) {\n          remaining = 0;\n          reject(error);\n        });\n      });\n    }\n    else {\n      resolve(results);\n    }\n  });\n};\n\n/**\n * Create a promise resolver\n * @returns {{promise: Promise, resolve: Function, reject: Function}} resolver\n */\nPromise.defer = function () {\n  var resolver = {};\n\n  resolver.promise = new Promise(function (resolve, reject) {\n    resolver.resolve = resolve;\n    resolver.reject = reject;\n  });\n\n  return resolver;\n};\n\n/**\n * Create a cancellation error\n * @param {String} [message]\n * @extends Error\n */\nfunction CancellationError(message) {\n  this.message = message || 'promise cancelled';\n  this.stack = (new Error()).stack;\n}\n\nCancellationError.prototype = new Error();\nCancellationError.prototype.constructor = Error;\nCancellationError.prototype.name = 'CancellationError';\n\nPromise.CancellationError = CancellationError;\n\n\n/**\n * Create a timeout error\n * @param {String} [message]\n * @extends Error\n */\nfunction TimeoutError(message) {\n  this.message = message || 'timeout exceeded';\n  this.stack = (new Error()).stack;\n}\n\nTimeoutError.prototype = new Error();\nTimeoutError.prototype.constructor = Error;\nTimeoutError.prototype.name = 'TimeoutError';\n\nPromise.TimeoutError = TimeoutError;\n\n\nmodule.exports = Promise;\n","'use strict';\n\nvar Promise = require('./Promise');\nvar environment = require('./environment');\nvar requireFoolWebpack = require('./requireFoolWebpack');\n\n/**\n * Special message sent by parent which causes a child process worker to terminate itself.\n * Not a \"message object\"; this string is the entire message.\n */\nvar TERMINATE_METHOD_ID = '__workerpool-terminate__';\n\nfunction ensureWorkerThreads() {\n  var WorkerThreads = tryRequireWorkerThreads()\n  if (!WorkerThreads) {\n    throw new Error('WorkerPool: workerType = \\'thread\\' is not supported, Node >= 11.7.0 required')\n  }\n\n  return WorkerThreads;\n}\n\n// check whether Worker is supported by the browser\nfunction ensureWebWorker() {\n  // Workaround for a bug in PhantomJS (Or QtWebkit): https://github.com/ariya/phantomjs/issues/14534\n  if (typeof Worker !== 'function' && (typeof Worker !== 'object' || typeof Worker.prototype.constructor !== 'function')) {\n    throw new Error('WorkerPool: Web Workers not supported');\n  }\n}\n\nfunction tryRequireWorkerThreads() {\n  try {\n    return requireFoolWebpack('worker_threads');\n  } catch(error) {\n    if (typeof error === 'object' && error !== null && error.code === 'MODULE_NOT_FOUND') {\n      // no worker_threads available (old version of node.js)\n      return null;\n    } else {\n      throw error;\n    }\n  }\n}\n\n// get the default worker script\nfunction getDefaultWorker() {\n  if (environment.platform === 'browser') {\n    // test whether the browser supports all features that we need\n    if (typeof Blob === 'undefined') {\n      throw new Error('Blob not supported by the browser');\n    }\n    if (!window.URL || typeof window.URL.createObjectURL !== 'function') {\n      throw new Error('URL.createObjectURL not supported by the browser');\n    }\n\n    // use embedded worker.js\n    var blob = new Blob([require('./generated/embeddedWorker')], {type: 'text/javascript'});\n    return window.URL.createObjectURL(blob);\n  }\n  else {\n    // use external worker.js in current directory\n    return __dirname + '/worker.js';\n  }\n}\n\nfunction setupWorker(script, options) {\n  if (options.workerType === 'web') { // browser only\n    ensureWebWorker();\n    return setupBrowserWorker(script, Worker);\n  } else if (options.workerType === 'thread') { // node.js only\n    WorkerThreads = ensureWorkerThreads();\n    return setupWorkerThreadWorker(script, WorkerThreads, options.workerThreadOpts);\n  } else if (options.workerType === 'process' || !options.workerType) { // node.js only\n    return setupProcessWorker(script, resolveForkOptions(options), requireFoolWebpack('child_process'));\n  } else { // options.workerType === 'auto' or undefined\n    if (environment.platform === 'browser') {\n      ensureWebWorker();\n      return setupBrowserWorker(script, Worker);\n    }\n    else { // environment.platform === 'node'\n      var WorkerThreads = tryRequireWorkerThreads();\n      if (WorkerThreads) {\n        return setupWorkerThreadWorker(script, WorkerThreads);\n      } else {\n        return setupProcessWorker(script, resolveForkOptions(options), requireFoolWebpack('child_process'));\n      }\n    }\n  }\n}\n\nfunction setupBrowserWorker(script, Worker) {\n  // create the web worker\n  var worker = new Worker(script);\n\n  worker.isBrowserWorker = true;\n  // add node.js API to the web worker\n  worker.on = function (event, callback) {\n    this.addEventListener(event, function (message) {\n      callback(message.data);\n    });\n  };\n  worker.send = function (message, transfer) {\n    this.postMessage(message, transfer);\n  };\n  return worker;\n}\n\nfunction setupWorkerThreadWorker(script, WorkerThreads, workerThreadOptions) {\n  var worker = new WorkerThreads.Worker(script, {\n    stdout: false, // automatically pipe worker.STDOUT to process.STDOUT\n    stderr: false,  // automatically pipe worker.STDERR to process.STDERR\n    ...workerThreadOptions\n  });\n  worker.isWorkerThread = true;\n  worker.send = function(message, transfer) {\n    this.postMessage(message, transfer);\n  };\n\n  worker.kill = function() {\n    this.terminate();\n    return true;\n  };\n\n  worker.disconnect = function() {\n    this.terminate();\n  };\n\n  return worker;\n}\n\nfunction setupProcessWorker(script, options, child_process) {\n  // no WorkerThreads, fallback to sub-process based workers\n  var worker = child_process.fork(\n    script,\n    options.forkArgs,\n    options.forkOpts\n  );\n\n  // ignore transfer argument since it is not supported by process\n  var send = worker.send;\n  worker.send = function (message) {\n    return send.call(worker, message);\n  };\n\n  worker.isChildProcess = true;\n  return worker;\n}\n\n// add debug flags to child processes if the node inspector is active\nfunction resolveForkOptions(opts) {\n  opts = opts || {};\n\n  var processExecArgv = process.execArgv.join(' ');\n  var inspectorActive = processExecArgv.indexOf('--inspect') !== -1;\n  var debugBrk = processExecArgv.indexOf('--debug-brk') !== -1;\n\n  var execArgv = [];\n  if (inspectorActive) {\n    execArgv.push('--inspect=' + opts.debugPort);\n\n    if (debugBrk) {\n      execArgv.push('--debug-brk');\n    }\n  }\n\n  process.execArgv.forEach(function(arg) {\n    if (arg.indexOf('--max-old-space-size') > -1) {\n      execArgv.push(arg)\n    }\n  })\n\n  return Object.assign({}, opts, {\n    forkArgs: opts.forkArgs,\n    forkOpts: Object.assign({}, opts.forkOpts, {\n      execArgv: (opts.forkOpts && opts.forkOpts.execArgv || [])\n      .concat(execArgv)\n    })\n  });\n}\n\n/**\n * Converts a serialized error to Error\n * @param {Object} obj Error that has been serialized and parsed to object\n * @return {Error} The equivalent Error.\n */\nfunction objectToError (obj) {\n  var temp = new Error('')\n  var props = Object.keys(obj)\n\n  for (var i = 0; i < props.length; i++) {\n    temp[props[i]] = obj[props[i]]\n  }\n\n  return temp\n}\n\n/**\n * A WorkerHandler controls a single worker. This worker can be a child process\n * on node.js or a WebWorker in a browser environment.\n * @param {String} [script] If no script is provided, a default worker with a\n *                          function run will be created.\n * @param {WorkerPoolOptions} _options See docs\n * @constructor\n */\nfunction WorkerHandler(script, _options) {\n  var me = this;\n  var options = _options || {};\n\n  this.script = script || getDefaultWorker();\n  this.worker = setupWorker(this.script, options);\n  this.debugPort = options.debugPort;\n  this.forkOpts = options.forkOpts;\n  this.forkArgs = options.forkArgs;\n  this.workerThreadOpts = options.workerThreadOpts\n  this.workerTerminateTimeout = options.workerTerminateTimeout;\n\n  // The ready message is only sent if the worker.add method is called (And the default script is not used)\n  if (!script) {\n    this.worker.ready = true;\n  }\n\n  // queue for requests that are received before the worker is ready\n  this.requestQueue = [];\n  this.worker.on('message', function (response) {\n    if (me.terminated) {\n      return;\n    }\n    if (typeof response === 'string' && response === 'ready') {\n      me.worker.ready = true;\n      dispatchQueuedRequests();\n    } else {\n      // find the task from the processing queue, and run the tasks callback\n      var id = response.id;\n      var task = me.processing[id];\n      if (task !== undefined) {\n        if (response.isEvent) {\n          if (task.options && typeof task.options.on === 'function') {\n            task.options.on(response.payload);\n          }\n        } else {\n          // remove the task from the queue\n          delete me.processing[id];\n\n          // test if we need to terminate\n          if (me.terminating === true) {\n            // complete worker termination if all tasks are finished\n            me.terminate();\n          }\n\n          // resolve the task's promise\n          if (response.error) {\n            task.resolver.reject(objectToError(response.error));\n          }\n          else {\n            task.resolver.resolve(response.result);\n          }\n        }\n      }\n    }\n  });\n\n  // reject all running tasks on worker error\n  function onError(error) {\n    me.terminated = true;\n\n    for (var id in me.processing) {\n      if (me.processing[id] !== undefined) {\n        me.processing[id].resolver.reject(error);\n      }\n    }\n    me.processing = Object.create(null);\n  }\n\n  // send all queued requests to worker\n  function dispatchQueuedRequests()\n  {\n    for(const request of me.requestQueue.splice(0)) {\n      me.worker.send(request.message, request.transfer);\n    }\n  }\n\n  var worker = this.worker;\n  // listen for worker messages error and exit\n  this.worker.on('error', onError);\n  this.worker.on('exit', function (exitCode, signalCode) {\n    var message = 'Workerpool Worker terminated Unexpectedly\\n';\n\n    message += '    exitCode: `' + exitCode + '`\\n';\n    message += '    signalCode: `' + signalCode + '`\\n';\n\n    message += '    workerpool.script: `' +  me.script + '`\\n';\n    message += '    spawnArgs: `' +  worker.spawnargs + '`\\n';\n    message += '    spawnfile: `' + worker.spawnfile + '`\\n'\n\n    message += '    stdout: `' + worker.stdout + '`\\n'\n    message += '    stderr: `' + worker.stderr + '`\\n'\n\n    onError(new Error(message));\n  });\n\n  this.processing = Object.create(null); // queue with tasks currently in progress\n\n  this.terminating = false;\n  this.terminated = false;\n  this.cleaning = false;\n  this.terminationHandler = null;\n  this.lastId = 0;\n}\n\n/**\n * Get a list with methods available on the worker.\n * @return {Promise.<String[], Error>} methods\n */\nWorkerHandler.prototype.methods = function () {\n  return this.exec('methods');\n};\n\n/**\n * Execute a method with given parameters on the worker\n * @param {String} method\n * @param {Array} [params]\n * @param {{resolve: Function, reject: Function}} [resolver]\n * @param {ExecOptions}  [options]\n * @return {Promise.<*, Error>} result\n */\nWorkerHandler.prototype.exec = function(method, params, resolver, options) {\n  if (!resolver) {\n    resolver = Promise.defer();\n  }\n\n  // generate a unique id for the task\n  var id = ++this.lastId;\n\n  // register a new task as being in progress\n  this.processing[id] = {\n    id: id,\n    resolver: resolver,\n    options: options\n  };\n\n  // build a JSON-RPC request\n  var request = {\n    message: {\n      id: id,\n      method: method,\n      params: params\n    },\n    transfer: options && options.transfer\n  };\n\n  if (this.terminated) {\n    resolver.reject(new Error('Worker is terminated'));\n  } else if (this.worker.ready) {\n    // send the request to the worker\n    this.worker.send(request.message, request.transfer);\n  } else {\n    this.requestQueue.push(request);\n  }\n\n  // on cancellation, force the worker to terminate\n  var me = this;\n  return resolver.promise.catch(function (error) {\n    if (error instanceof Promise.CancellationError || error instanceof Promise.TimeoutError) {\n      // remove this task from the queue. It is already rejected (hence this\n      // catch event), and else it will be rejected again when terminating\n      delete me.processing[id];\n\n      // terminate worker\n      return me.terminateAndNotify(true)\n        .then(function() {\n          throw error;\n        }, function(err) {\n          throw err;\n        });\n    } else {\n      throw error;\n    }\n  })\n};\n\n/**\n * Test whether the worker is processing any tasks or cleaning up before termination.\n * @return {boolean} Returns true if the worker is busy\n */\nWorkerHandler.prototype.busy = function () {\n  return this.cleaning || Object.keys(this.processing).length > 0;\n};\n\n/**\n * Terminate the worker.\n * @param {boolean} [force=false]   If false (default), the worker is terminated\n *                                  after finishing all tasks currently in\n *                                  progress. If true, the worker will be\n *                                  terminated immediately.\n * @param {function} [callback=null] If provided, will be called when process terminates.\n */\nWorkerHandler.prototype.terminate = function (force, callback) {\n  var me = this;\n  if (force) {\n    // cancel all tasks in progress\n    for (var id in this.processing) {\n      if (this.processing[id] !== undefined) {\n        this.processing[id].resolver.reject(new Error('Worker terminated'));\n      }\n    }\n    this.processing = Object.create(null);\n  }\n\n  if (typeof callback === 'function') {\n    this.terminationHandler = callback;\n  }\n  if (!this.busy()) {\n    // all tasks are finished. kill the worker\n    var cleanup = function(err) {\n      me.terminated = true;\n      me.cleaning = false;\n      if (me.worker != null && me.worker.removeAllListeners) {\n        // removeAllListeners is only available for child_process\n        me.worker.removeAllListeners('message');\n      }\n      me.worker = null;\n      me.terminating = false;\n      if (me.terminationHandler) {\n        me.terminationHandler(err, me);\n      } else if (err) {\n        throw err;\n      }\n    }\n\n    if (this.worker) {\n      if (typeof this.worker.kill === 'function') {\n        if (this.worker.killed) {\n          cleanup(new Error('worker already killed!'));\n          return;\n        }\n\n        // child process and worker threads\n        var cleanExitTimeout = setTimeout(function() {\n          if (me.worker) {\n            me.worker.kill();\n          }\n        }, this.workerTerminateTimeout);\n\n        this.worker.once('exit', function() {\n          clearTimeout(cleanExitTimeout);\n          if (me.worker) {\n            me.worker.killed = true;\n          }\n          cleanup();\n        });\n\n        if (this.worker.ready) {\n          this.worker.send(TERMINATE_METHOD_ID);\n        } else {\n          this.requestQueue.push(TERMINATE_METHOD_ID);\n        }\n        \n        // mark that the worker is cleaning up resources\n        // to prevent new tasks from being executed\n        this.cleaning = true;\n        return;\n      }\n      else if (typeof this.worker.terminate === 'function') {\n        this.worker.terminate(); // web worker\n        this.worker.killed = true;\n      }\n      else {\n        throw new Error('Failed to terminate worker');\n      }\n    }\n    cleanup();\n  }\n  else {\n    // we can't terminate immediately, there are still tasks being executed\n    this.terminating = true;\n  }\n};\n\n/**\n * Terminate the worker, returning a Promise that resolves when the termination has been done.\n * @param {boolean} [force=false]   If false (default), the worker is terminated\n *                                  after finishing all tasks currently in\n *                                  progress. If true, the worker will be\n *                                  terminated immediately.\n * @param {number} [timeout]        If provided and non-zero, worker termination promise will be rejected\n *                                  after timeout if worker process has not been terminated.\n * @return {Promise.<WorkerHandler, Error>}\n */\nWorkerHandler.prototype.terminateAndNotify = function (force, timeout) {\n  var resolver = Promise.defer();\n  if (timeout) {\n    resolver.promise.timeout = timeout;\n  }\n  this.terminate(force, function(err, worker) {\n    if (err) {\n      resolver.reject(err);\n    } else {\n      resolver.resolve(worker);\n    }\n  });\n  return resolver.promise;\n};\n\nmodule.exports = WorkerHandler;\nmodule.exports._tryRequireWorkerThreads = tryRequireWorkerThreads;\nmodule.exports._setupProcessWorker = setupProcessWorker;\nmodule.exports._setupBrowserWorker = setupBrowserWorker;\nmodule.exports._setupWorkerThreadWorker = setupWorkerThreadWorker;\nmodule.exports.ensureWorkerThreads = ensureWorkerThreads;\n","'use strict';\n\nvar MAX_PORTS = 65535;\nmodule.exports = DebugPortAllocator;\nfunction DebugPortAllocator() {\n  this.ports = Object.create(null);\n  this.length = 0;\n}\n\nDebugPortAllocator.prototype.nextAvailableStartingAt = function(starting) {\n  while (this.ports[starting] === true) {\n    starting++;\n  }\n\n  if (starting >= MAX_PORTS) {\n    throw new Error('WorkerPool debug port limit reached: ' + starting + '>= ' + MAX_PORTS );\n  }\n\n  this.ports[starting] = true;\n  this.length++;\n  return starting;\n};\n\nDebugPortAllocator.prototype.releasePort = function(port) {\n  delete this.ports[port];\n  this.length--;\n};\n\n","var requireFoolWebpack = require('./requireFoolWebpack');\n\n// source: https://github.com/flexdinesh/browser-or-node\nvar isNode = function (nodeProcess) {\n  return (\n    typeof nodeProcess !== 'undefined' &&\n    nodeProcess.versions != null &&\n    nodeProcess.versions.node != null\n  );\n}\nmodule.exports.isNode = isNode\n\n// determines the JavaScript platform: browser or node\nmodule.exports.platform = typeof process !== 'undefined' && isNode(process)\n  ? 'node'\n  : 'browser';\n\n// determines whether the code is running in main thread or not\n// note that in node.js we have to check both worker_thread and child_process\nvar worker_threads = tryRequireFoolWebpack('worker_threads');\nmodule.exports.isMainThread = module.exports.platform === 'node'\n  ? ((!worker_threads || worker_threads.isMainThread) && !process.connected)\n  : typeof Window !== 'undefined';\n\n// determines the number of cpus available\nmodule.exports.cpus = module.exports.platform === 'browser'\n  ? self.navigator.hardwareConcurrency\n  : requireFoolWebpack('os').cpus().length;\n\nfunction tryRequireFoolWebpack (module) {\n  try {\n    return requireFoolWebpack(module);\n  } catch(err) {\n    return null\n  }\n}\n","/**\n * embeddedWorker.js contains an embedded version of worker.js.\n * This file is automatically generated,\n * changes made in this file will be overwritten.\n */\nmodule.exports = \"!function(){var __webpack_modules__={577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];return void 0!==r||(r=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](r,r.exports,__webpack_require__)),r.exports}var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(e){return(_typeof=\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\\\"function\\\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\\\"symbol\\\":typeof e})(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval(\\\"typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\\\\\\" + module + \\\\\\\" not found.') }\\\"),TERMINATE_METHOD_ID=\\\"__workerpool-terminate__\\\",worker={exit:function(){}},WorkerThreads,parentPort;if(\\\"undefined\\\"!=typeof self&&\\\"function\\\"==typeof postMessage&&\\\"function\\\"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,function(e){r(e.data)})},worker.send=function(e){postMessage(e)};else{if(\\\"undefined\\\"==typeof process)throw new Error(\\\"Script must be executed as a worker\\\");try{WorkerThreads=requireFoolWebpack(\\\"worker_threads\\\")}catch(error){if(\\\"object\\\"!==_typeof(error)||null===error||\\\"MODULE_NOT_FOUND\\\"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on(\\\"disconnect\\\",function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(e,r){return Object.defineProperty(e,r,{value:o[r],enumerable:!0})},{})}function isPromise(e){return e&&\\\"function\\\"==typeof e.then&&\\\"function\\\"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){e=new Function(\\\"return (\\\"+e+\\\").apply(null, arguments);\\\");return e.apply(e,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){function r(){worker.exit(e)}if(!worker.terminationHandler)return r();var o=worker.terminationHandler(e);isPromise(o)?o.then(r,r):r()};var currentRequestId=null;worker.on(\\\"message\\\",function(r){if(r===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var e=worker.methods[r.method];if(!e)throw new Error('Unknown method \\\"'+r.method+'\\\"');currentRequestId=r.id;var o=e.apply(e,r.params);isPromise(o)?o.then(function(e){e instanceof Transfer?worker.send({id:r.id,result:e.message,error:null},e.transfer):worker.send({id:r.id,result:e,error:null}),currentRequestId=null}).catch(function(e){worker.send({id:r.id,result:null,error:convertError(e)}),currentRequestId=null}):(o instanceof Transfer?worker.send({id:r.id,result:o.message,error:null},o.transfer):worker.send({id:r.id,result:o,error:null}),currentRequestId=null)}catch(e){worker.send({id:r.id,result:null,error:convertError(e)})}}),worker.register=function(e,r){if(e)for(var o in e)e.hasOwnProperty(o)&&(worker.methods[o]=e[o]);r&&(worker.terminationHandler=r.onTerminate),worker.send(\\\"ready\\\")},worker.emit=function(e){currentRequestId&&(e instanceof Transfer?worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer):worker.send({id:currentRequestId,isEvent:!0,payload:e}))},__webpack_unused_export__=worker.register,worker.emit}()}();\";\n","// source of inspiration: https://github.com/sindresorhus/require-fool-webpack\nvar requireFoolWebpack = eval(\n    'typeof require !== \\'undefined\\' ' +\n    '? require ' +\n    ': function (module) { throw new Error(\\'Module \" + module + \" not found.\\') }'\n);\n\nmodule.exports = requireFoolWebpack;\n","/**\n * The helper class for transferring data from the worker to the main thread.\n *\n * @param {Object} message The object to deliver to the main thread.\n * @param {Object[]} transfer An array of transferable Objects to transfer ownership of.\n */\nfunction Transfer(message, transfer) {\n  this.message = message;\n  this.transfer = transfer;\n}\n\nmodule.exports = Transfer;\n","/**\n * worker must be started as a child process or a web worker.\n * It listens for RPC messages from the parent process.\n */\nvar Transfer = require('./transfer');\n\n// source of inspiration: https://github.com/sindresorhus/require-fool-webpack\nvar requireFoolWebpack = eval(\n    'typeof require !== \\'undefined\\'' +\n    ' ? require' +\n    ' : function (module) { throw new Error(\\'Module \" + module + \" not found.\\') }'\n);\n\n/**\n * Special message sent by parent which causes the worker to terminate itself.\n * Not a \"message object\"; this string is the entire message.\n */\nvar TERMINATE_METHOD_ID = '__workerpool-terminate__';\n\n// var nodeOSPlatform = require('./environment').nodeOSPlatform;\n\n// create a worker API for sending and receiving messages which works both on\n// node.js and in the browser\nvar worker = {\n  exit: function() {}\n};\nif (typeof self !== 'undefined' && typeof postMessage === 'function' && typeof addEventListener === 'function') {\n  // worker in the browser\n  worker.on = function (event, callback) {\n    addEventListener(event, function (message) {\n      callback(message.data);\n    })\n  };\n  worker.send = function (message) {\n    postMessage(message);\n  };\n}\nelse if (typeof process !== 'undefined') {\n  // node.js\n\n  var WorkerThreads;\n  try {\n    WorkerThreads = requireFoolWebpack('worker_threads');\n  } catch(error) {\n    if (typeof error === 'object' && error !== null && error.code === 'MODULE_NOT_FOUND') {\n      // no worker_threads, fallback to sub-process based workers\n    } else {\n      throw error;\n    }\n  }\n\n  if (WorkerThreads &&\n    /* if there is a parentPort, we are in a WorkerThread */\n    WorkerThreads.parentPort !== null) {\n    var parentPort  = WorkerThreads.parentPort;\n    worker.send = parentPort.postMessage.bind(parentPort);\n    worker.on = parentPort.on.bind(parentPort);\n    worker.exit = process.exit.bind(process);\n  } else {\n    worker.on = process.on.bind(process);\n    // ignore transfer argument since it is not supported by process\n    worker.send = function (message) {\n      process.send(message);\n    };\n    // register disconnect handler only for subprocess worker to exit when parent is killed unexpectedly\n    worker.on('disconnect', function () {\n      process.exit(1);\n    });\n    worker.exit = process.exit.bind(process);\n  }\n}\nelse {\n  throw new Error('Script must be executed as a worker');\n}\n\nfunction convertError(error) {\n  return Object.getOwnPropertyNames(error).reduce(function(product, name) {\n    return Object.defineProperty(product, name, {\n\tvalue: error[name],\n\tenumerable: true\n    });\n  }, {});\n}\n\n/**\n * Test whether a value is a Promise via duck typing.\n * @param {*} value\n * @returns {boolean} Returns true when given value is an object\n *                    having functions `then` and `catch`.\n */\nfunction isPromise(value) {\n  return value && (typeof value.then === 'function') && (typeof value.catch === 'function');\n}\n\n// functions available externally\nworker.methods = {};\n\n/**\n * Execute a function with provided arguments\n * @param {String} fn     Stringified function\n * @param {Array} [args]  Function arguments\n * @returns {*}\n */\nworker.methods.run = function run(fn, args) {\n  var f = new Function('return (' + fn + ').apply(null, arguments);');\n  return f.apply(f, args);\n};\n\n/**\n * Get a list with methods available on this worker\n * @return {String[]} methods\n */\nworker.methods.methods = function methods() {\n  return Object.keys(worker.methods);\n};\n\n/**\n * Custom handler for when the worker is terminated.\n */\nworker.terminationHandler = undefined;\n\n/**\n * Cleanup and exit the worker.\n * @param {Number} code \n * @returns \n */\nworker.cleanupAndExit = function(code) {\n  var _exit = function() {\n    worker.exit(code);\n  }\n\n  if(!worker.terminationHandler) {\n    return _exit();\n  }\n\n  var result = worker.terminationHandler(code);\n  if (isPromise(result)) {\n    result.then(_exit, _exit);\n  } else {\n    _exit();\n  }\n}\n\nvar currentRequestId = null;\n\nworker.on('message', function (request) {\n  if (request === TERMINATE_METHOD_ID) {\n    return worker.cleanupAndExit(0);\n  }\n  try {\n    var method = worker.methods[request.method];\n\n    if (method) {\n      currentRequestId = request.id;\n      \n      // execute the function\n      var result = method.apply(method, request.params);\n\n      if (isPromise(result)) {\n        // promise returned, resolve this and then return\n        result\n            .then(function (result) {\n              if (result instanceof Transfer) {\n                worker.send({\n                  id: request.id,\n                  result: result.message,\n                  error: null\n                }, result.transfer);\n              } else {\n                worker.send({\n                  id: request.id,\n                  result: result,\n                  error: null\n                });\n              }\n              currentRequestId = null;\n            })\n            .catch(function (err) {\n              worker.send({\n                id: request.id,\n                result: null,\n                error: convertError(err)\n              });\n              currentRequestId = null;\n            });\n      }\n      else {\n        // immediate result\n        if (result instanceof Transfer) {\n          worker.send({\n            id: request.id,\n            result: result.message,\n            error: null\n          }, result.transfer);\n        } else {\n          worker.send({\n            id: request.id,\n            result: result,\n            error: null\n          });\n        }\n\n        currentRequestId = null;\n      }\n    }\n    else {\n      throw new Error('Unknown method \"' + request.method + '\"');\n    }\n  }\n  catch (err) {\n    worker.send({\n      id: request.id,\n      result: null,\n      error: convertError(err)\n    });\n  }\n});\n\n/**\n * Register methods to the worker\n * @param {Object} [methods]\n * @param {WorkerRegisterOptions} [options]\n */\nworker.register = function (methods, options) {\n\n  if (methods) {\n    for (var name in methods) {\n      if (methods.hasOwnProperty(name)) {\n        worker.methods[name] = methods[name];\n      }\n    }\n  }\n\n  if (options) {\n    worker.terminationHandler = options.onTerminate;\n  }\n\n  worker.send('ready');\n};\n\nworker.emit = function (payload) {\n  if (currentRequestId) {\n    if (payload instanceof Transfer) {\n      worker.send({\n        id: currentRequestId,\n        isEvent: true,\n        payload: payload.message\n      }, payload.transfer);\n      return;\n    }\n\n    worker.send({\n      id: currentRequestId,\n      isEvent: true,\n      payload\n    });\n  }\n};\n\nif (typeof exports !== 'undefined') {\n  exports.add = worker.register;\n  exports.emit = worker.emit;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var environment = require('./environment');\n\n/**\n * Create a new worker pool\n * @param {string} [script]\n * @param {WorkerPoolOptions} [options]\n * @returns {Pool} pool\n */\nexports.pool = function pool(script, options) {\n  var Pool = require('./Pool');\n\n  return new Pool(script, options);\n};\n\n/**\n * Create a worker and optionally register a set of methods to the worker.\n * @param {Object} [methods]\n * @param {WorkerRegisterOptions} [options]\n */\nexports.worker = function worker(methods, options) {\n  var worker = require('./worker');\n  worker.add(methods, options);\n};\n\n/**\n * Sends an event to the parent worker pool.\n * @param {any} payload \n */\nexports.workerEmit = function workerEmit(payload) {\n  var worker = require('./worker');\n  worker.emit(payload);\n};\n\n/**\n * Create a promise.\n * @type {Promise} promise\n */\nexports.Promise = require('./Promise');\n\n/**\n * Create a transfer object.\n * @type {Transfer} transfer\n */\nexports.Transfer = require('./transfer');\n\nexports.platform = environment.platform;\nexports.isMainThread = environment.isMainThread;\nexports.cpus = environment.cpus;"],"names":["root","factory","exports","module","define","amd","self","this","Promise","require","WorkerHandler","environment","DEBUG_PORT_ALLOCATOR","Pool","script","options","workers","tasks","forkArgs","Object","freeze","forkOpts","workerThreadOpts","debugPortStart","nodeWorker","workerType","maxQueueSize","Infinity","workerTerminateTimeout","onCreateWorker","onTerminateWorker","maxWorkers","isNumber","isInteger","TypeError","validateMaxWorkers","Math","max","cpus","minWorkers","validateMinWorkers","_ensureMinWorkers","_boundNext","_next","bind","ensureWorkerThreads","value","round","prototype","exec","method","params","Array","isArray","resolver","defer","length","Error","task","timeout","push","originalTimeout","promise","delay","indexOf","call","String","proxy","arguments","pool","then","methods","forEach","slice","worker","_getWorker","me","shift","pending","terminated","_removeWorker","i","busy","_createWorkerHandler","releasePort","debugPort","_removeWorkerFromList","resolve","reject","terminate","err","index","splice","force","removeWorker","promises","termPromise","terminateAndNotify","always","all","stats","totalWorkers","busyWorkers","filter","idleWorkers","pendingTasks","activeTasks","overridenParams","nextAvailableStartingAt","handler","parent","SyntaxError","_onSuccess","_onFail","resolved","rejected","_process","onSuccess","onFail","s","_then","f","_resolve","result","fn","_reject","error","cancel","CancellationError","timer","setTimeout","TimeoutError","clearTimeout","callback","res","message","stack","remaining","results","p","constructor","name","_arrayLikeToArray","arr","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_defineProperty","obj","key","arg","input","hint","_typeof","prim","Symbol","toPrimitive","undefined","_toPrimitive","_toPropertyKey","defineProperty","configurable","writable","iterator","requireFoolWebpack","TERMINATE_METHOD_ID","WorkerThreads","tryRequireWorkerThreads","ensureWebWorker","Worker","code","setupBrowserWorker","isBrowserWorker","on","event","addEventListener","data","send","transfer","postMessage","setupWorkerThreadWorker","workerThreadOptions","target","source","getOwnPropertyDescriptors","defineProperties","_objectSpread","stdout","stderr","isWorkerThread","kill","disconnect","setupProcessWorker","child_process","fork","isChildProcess","resolveForkOptions","opts","processExecArgv","process","execArgv","join","inspectorActive","debugBrk","assign","concat","_options","onError","id","processing","create","platform","Blob","window","URL","createObjectURL","blob","type","__dirname","getDefaultWorker","setupWorker","ready","requestQueue","response","_step","_iterator","o","allowArrayLike","it","minLen","n","toString","from","test","_unsupportedIterableToArray","F","done","e","_e","normalCompletion","didErr","step","next","_e2","_createForOfIteratorHelper","request","dispatchQueuedRequests","isEvent","payload","terminating","temp","props","objectToError","exitCode","signalCode","spawnargs","spawnfile","cleaning","terminationHandler","lastId","cleanup","removeAllListeners","killed","cleanExitTimeout","once","_tryRequireWorkerThreads","_setupProcessWorker","_setupBrowserWorker","_setupWorkerThreadWorker","DebugPortAllocator","ports","starting","port","isNode","nodeProcess","versions","node","worker_threads","tryRequireFoolWebpack","isMainThread","connected","Window","navigator","hardwareConcurrency","eval","Transfer","exit","parentPort","convertError","getOwnPropertyNames","reduce","product","isPromise","run","args","Function","cleanupAndExit","_exit","currentRequestId","register","hasOwnProperty","onTerminate","emit","add","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","workerEmit"],"sourceRoot":""}